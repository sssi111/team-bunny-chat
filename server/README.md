# Team Bunny Chat Server

Сервер для получения истории сообщений чата через RabbitMQ.

## Описание

- Сервер подписан на все топики (чаты) в RabbitMQ и сохраняет сообщения.
- По HTTP API можно получить историю сообщений конкретного чата.

## Архитектура

- **RabbitMQ** — брокер сообщений, где каждый чат — отдельный топик (exchange/queue).
- **Сервер** — подписан на все топики, сохраняет сообщения, отдаёт историю по API.
- **Клиенты** — подписываются на нужные топики, отправляют и получают сообщения.

## API

OpenAPI спецификация находится в файле [`openapi.yaml`](./openapi.yaml).

### Получить историю сообщений чата

```
GET /v1/chats/history?chat={chat_id}&limit=50
```

**Параметры:**
- `chat` — идентификатор чата (название топика) (**обязательный**)
- `limit` — максимальное количество сообщений (по умолчанию 50)

**Ответ:**
```json
{
  "chat_id": "example-chat",
  "messages": [
    {
      "id": "msg-1",
      "sender": "user1",
      "content": "Привет!",
      "timestamp": "2024-06-01T12:00:00Z"
    }
  ]
}
```

Если чат не найден, возвращается 200 OK с пустым массивом сообщений:

```json
{
  "chat_id": "not-exist-chat",
  "messages": []
}
```

## Запуск

1. Убедитесь, что запущен RabbitMQ (например, через Docker).
2. Соберите и запустите сервер:
   ```sh
   cd server
   go build -o chat-server
   ./chat-server
   ```

## Переменные окружения

- `RABBITMQ_URL` — адрес подключения к RabbitMQ (например, `amqp://guest:guest@localhost:5672/`)
- `PORT` — порт HTTP сервера (по умолчанию 8080)

---

## Лицензия

MIT 